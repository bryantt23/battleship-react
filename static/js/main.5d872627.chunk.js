(this["webpackJsonpbattleship-react"]=this["webpackJsonpbattleship-react"]||[]).push([[0],{18:function(t,e,a){},19:function(t,e,a){},20:function(t,e,a){"use strict";a.r(e);var i=a(0),r=a(3),n=a.n(r),o=a(12),s=a.n(o),h=(a(18),a(9)),c=a(4),u=a(10),l=a(1),d=a(2),p=a(8),v=a(7),m=(a(19),function(){function t(e){Object(l.a)(this,t),this.name=e}return Object(d.a)(t,[{key:"makePlay",value:function(t){var e=t.getBoard().length;return[Math.floor(Math.random()*e),Math.floor(Math.random()*e)]}}]),t}()),b=function(){function t(e){Object(l.a)(this,t),this.length=e,this.hitCount=0,this.sunk=!1}return Object(d.a)(t,[{key:"hit",value:function(){this.hitCount++,this.hitCount===this.length&&(this.sunk=!0)}},{key:"isSunk",value:function(){return this.sunk}}]),t}(),f=function(){function t(e){Object(l.a)(this,t),this.boardSize=e;for(var a=[],i=0;i<this.boardSize;i++)a.push(new Array(this.boardSize));this.gameBoard=a,this.ships=[]}return Object(d.a)(t,[{key:"allShipsSunk",value:function(){return this.ships.every((function(t){return t.isSunk()}))}},{key:"getBoard",value:function(){return this.gameBoard}},{key:"isValidAttack",value:function(t,e,a){return!a[t][e]}},{key:"receiveAttack",value:function(t,e,a,i){void 0===a[t][e]?a[t][e]="MISS":(this.gameBoard[t][e].hit(),a[t][e]="HIT");return i[t][e]=!0,[a,i]}},{key:"setShip",value:function(t,e,a,i){var r=i.length;if("vertical"===a)for(var n=t;n<t+r;n++)this.gameBoard[n][e]=i;else for(var o=e;o<e+r;o++)this.gameBoard[t][o]=i}},{key:"placeShip",value:function(t,e,a,i){this.setShip(t,e,a,i),this.ships.push(i)}},{key:"isValidShipPosition",value:function(t,e,a,i){var r=i.length;if("vertical"===a){if(t+r>this.boardSize)return!1;for(var n=t;n<t+r;n++)if(void 0!==this.gameBoard[n][e])return!1}else{if(e+r>this.boardSize)return!1;for(var o=e;o<e+r;o++)if(void 0!==this.gameBoard[t][o])return!1}return!0}}]),t}(),y=[3,4,5],g=function(){function t(){Object(l.a)(this,t)}return Object(d.a)(t,[{key:"getCoordinates",value:function(){var t=this.playerGameboard.boardSize;return[Math.floor(Math.random()*t),Math.floor(Math.random()*t)]}},{key:"getOrientation",value:function(){return 0===Math.round(Math.random())?"horizontal":"vertical"}},{key:"placeShips",value:function(){for(var t=y.length,e=0;e<t;){for(var a=new b(y[e]),i=this.getCoordinates(),r=Object(c.a)(i,2),n=r[0],o=r[1],s=this.getOrientation(),h=this.playerGameboard.isValidShipPosition(n,o,s,a);!h;){var u=this.getCoordinates(),l=Object(c.a)(u,2);n=l[0],o=l[1],s=this.getOrientation(),h=this.playerGameboard.isValidShipPosition(n,o,s,a)}this.playerGameboard.placeShip(n,o,s,a),e++}for(e=0;e<t;){for(var d=new b(y[e]),p=this.getCoordinates(),v=Object(c.a)(p,2),m=v[0],f=v[1],g=this.getOrientation(),j=this.computerGameboard.isValidShipPosition(m,f,g,d);!j;){var k=this.getCoordinates(),S=Object(c.a)(k,2);m=S[0],f=S[1],g=this.getOrientation(),j=this.computerGameboard.isValidShipPosition(m,f,g,d)}this.computerGameboard.placeShip(m,f,g,d),e++}}},{key:"startGame",value:function(){this.player=new m("player"),this.computer=new m("computer"),this.playerGameboard=new f(10),this.computerGameboard=new f(10),this.placeShips()}}]),t}(),j=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var t,e,a=this,r=this.props,n=r.attacked,o=r.status,s=r.isComputer;return void 0===o||!n&&s?(t="SEA",e="blue"):"object"===typeof o?(t="SHIP",e="grey"):(t=o,e="HIT"===o?"red":"green"),Object(i.jsx)("td",{disabled:n,style:{height:50,width:50,display:"inlineBlock",backgroundColor:e},onClick:function(){!n&&a.props.updateBoardSectionState()},children:t})}}]),a}(r.Component),k=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;return Object(l.a)(this,a),(t=e.call(this)).state={cheat:!1,playerPositionsThatHaveBeenAttacked:[],computerPositionsThatHaveBeenAttacked:[],playerBoard:[],computerBoard:[],allShipsSunk:!1,winner:null,isPlayerTurn:!0,disabled:!1},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.gameEngine=new g,this.gameEngine.startGame(),this.playerBoard=this.gameEngine.playerGameboard,this.computerBoard=this.gameEngine.computerGameboard;for(var t=this.gameEngine.playerGameboard.getBoard().length,e=[],a=0;a<t;a++)e.push(new Array(t));var i=JSON.parse(JSON.stringify(e));this.setState({playerBoard:Object(u.a)(this.gameEngine.playerGameboard.getBoard()),computerBoard:Object(u.a)(this.gameEngine.computerGameboard.getBoard()),playerPositionsThatHaveBeenAttacked:e,computerPositionsThatHaveBeenAttacked:i})}},{key:"computerMove",value:function(){var t=this.gameEngine.computer.makePlay(this.playerBoard),e=Object(c.a)(t,2),a=e[0],i=e[1],r=Object(u.a)(this.state.playerPositionsThatHaveBeenAttacked);this.playerBoard.isValidAttack(a,i,r)?this.updateBoardSectionState(a,i,"playerBoard"):(console.log("invalid computer move"),this.computerMove())}},{key:"updateBoardSectionState",value:function(t,e,a){var i,r=this;i="playerBoard"===a?"playerPositionsThatHaveBeenAttacked":"computerPositionsThatHaveBeenAttacked";var n=this.state[i];if(this[a].isValidAttack(t,e,n)){var o;console.log("valid move");var s,u=this.state[a],l=this[a].receiveAttack(t,e,u,n),d=Object(c.a)(l,2),p=d[0],v=d[1];if(console.log("all sunk",this[a].allShipsSunk()),this[a].allShipsSunk())return s="playerBoard"===a?"Computer wins!":"Player wins!",void this.setState({allShipsSunk:!0,winner:s,disabled:!0});this.setState((o={},Object(h.a)(o,i,v),Object(h.a)(o,a,p),Object(h.a)(o,"isPlayerTurn",!this.state.isPlayerTurn),o),(function(){r.state.isPlayerTurn||r.computerMove()}))}else console.log("invalid move")}},{key:"renderPlayerUi",value:function(){for(var t=[],e=this.state.playerBoard.length,a=0;a<e;a++){for(var r=[],n=0;n<e;n++)r.push(Object(i.jsx)(j,{attacked:this.state.playerPositionsThatHaveBeenAttacked[a][n],status:this.state.playerBoard[a][n],updateBoardSectionState:function(){}}));var o=Object(i.jsx)("tr",{children:r});t.push(o)}return console.log(t),t}},{key:"renderComputerUi",value:function(){for(var t=this,e=[],a=this.state.computerBoard.length,r=function(r){for(var n=[],o=function(e){n.push(Object(i.jsx)(j,{isComputer:!0,attacked:t.state.computerPositionsThatHaveBeenAttacked[r][e],status:t.state.computerBoard[r][e],updateBoardSectionState:function(){t.updateBoardSectionState(r,e,"computerBoard")}}))},s=0;s<a;s++)o(s);var h=Object(i.jsx)("tr",{children:n});e.push(h)},n=0;n<a;n++)r(n);return e}},{key:"renderComputerUiCheat",value:function(){for(var t=[],e=this.state.computerBoard.length,a=0;a<e;a++){for(var r=[],n=0;n<e;n++)r.push(Object(i.jsx)(j,{status:this.state.computerBoard[a][n],updateBoardSectionState:function(){}}));var o=Object(i.jsx)("tr",{children:r});t.push(o)}return t}},{key:"render",value:function(){var t=this,e=this.renderPlayerUi(),a=this.renderComputerUi(),r=this.renderComputerUiCheat();return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("h1",{children:"Battleship"}),Object(i.jsxs)("div",{disabled:null!==this.state.winner,id:"gameboard",children:[Object(i.jsx)("h3",{children:"Player Board"}),e,Object(i.jsx)("h3",{children:"Computer Board"}),a,Object(i.jsx)("br",{})]}),this.state.disabled?Object(i.jsx)("h2",{children:this.state.winner}):"",Object(i.jsxs)("button",{onClick:function(){t.setState({cheat:!t.state.cheat})},children:[this.state.cheat?"Hide ":"Show "," computer's ships"," "]}),this.state.cheat&&r]})}}]),a}(r.Component),S=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,21)).then((function(e){var a=e.getCLS,i=e.getFID,r=e.getFCP,n=e.getLCP,o=e.getTTFB;a(t),i(t),r(t),n(t),o(t)}))};s.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(k,{})}),document.getElementById("root")),S()}},[[20,1,2]]]);
//# sourceMappingURL=main.5d872627.chunk.js.map